<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>DefaultMatsSocketServer (matssocket 0.19.0-2022-11-11 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: io.mats3.matssocket.impl, class: DefaultMatsSocketServer">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">io.mats3.matssocket.impl</a></div>
<h1 title="Class DefaultMatsSocketServer" class="title">Class DefaultMatsSocketServer</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">io.mats3.matssocket.impl.DefaultMatsSocketServer</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="MatsSocketStatics.html" title="interface in io.mats3.matssocket.impl">MatsSocketStatics</a></code>, <code><a href="../MatsSocketServer.html" title="interface in io.mats3.matssocket">MatsSocketServer</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">DefaultMatsSocketServer</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="../MatsSocketServer.html" title="interface in io.mats3.matssocket">MatsSocketServer</a>, <a href="MatsSocketStatics.html" title="interface in io.mats3.matssocket.impl">MatsSocketStatics</a></span></div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="inherited-list">
<h2 id="nested-classes-inherited-from-class-io.mats3.matssocket.MatsSocketServer">Nested classes/interfaces inherited from interface&nbsp;io.mats3.matssocket.<a href="../MatsSocketServer.html" title="interface in io.mats3.matssocket">MatsSocketServer</a></h2>
<code><a href="../MatsSocketServer.ActiveMatsSocketSession.html" title="interface in io.mats3.matssocket">MatsSocketServer.ActiveMatsSocketSession</a>, <a href="../MatsSocketServer.ActiveMatsSocketSessionDto.html" title="class in io.mats3.matssocket">MatsSocketServer.ActiveMatsSocketSessionDto</a>, <a href="../MatsSocketServer.DataStoreException.html" title="class in io.mats3.matssocket">MatsSocketServer.DataStoreException</a>, <a href="../MatsSocketServer.IncomingAuthorizationAndAdapter.html" title="interface in io.mats3.matssocket">MatsSocketServer.IncomingAuthorizationAndAdapter</a>&lt;<a href="../MatsSocketServer.IncomingAuthorizationAndAdapter.html" title="type parameter in MatsSocketServer.IncomingAuthorizationAndAdapter">I</a>,<wbr><a href="../MatsSocketServer.IncomingAuthorizationAndAdapter.html" title="type parameter in MatsSocketServer.IncomingAuthorizationAndAdapter">MR</a>,<wbr><a href="../MatsSocketServer.IncomingAuthorizationAndAdapter.html" title="type parameter in MatsSocketServer.IncomingAuthorizationAndAdapter">R</a>&gt;, <a href="../MatsSocketServer.LiveMatsSocketSession.html" title="interface in io.mats3.matssocket">MatsSocketServer.LiveMatsSocketSession</a>, <a href="../MatsSocketServer.MatsSocketCloseCodes.html" title="enum class in io.mats3.matssocket">MatsSocketServer.MatsSocketCloseCodes</a>, <a href="../MatsSocketServer.MatsSocketEndpoint.html" title="interface in io.mats3.matssocket">MatsSocketServer.MatsSocketEndpoint</a>&lt;<a href="../MatsSocketServer.MatsSocketEndpoint.html" title="type parameter in MatsSocketServer.MatsSocketEndpoint">I</a>,<wbr><a href="../MatsSocketServer.MatsSocketEndpoint.html" title="type parameter in MatsSocketServer.MatsSocketEndpoint">MR</a>,<wbr><a href="../MatsSocketServer.MatsSocketEndpoint.html" title="type parameter in MatsSocketServer.MatsSocketEndpoint">R</a>&gt;, <a href="../MatsSocketServer.MatsSocketEndpointContext.html" title="interface in io.mats3.matssocket">MatsSocketServer.MatsSocketEndpointContext</a>&lt;<a href="../MatsSocketServer.MatsSocketEndpointContext.html" title="type parameter in MatsSocketServer.MatsSocketEndpointContext">I</a>,<wbr><a href="../MatsSocketServer.MatsSocketEndpointContext.html" title="type parameter in MatsSocketServer.MatsSocketEndpointContext">MR</a>,<wbr><a href="../MatsSocketServer.MatsSocketEndpointContext.html" title="type parameter in MatsSocketServer.MatsSocketEndpointContext">R</a>&gt;, <a href="../MatsSocketServer.MatsSocketEndpointIncomingContext.html" title="interface in io.mats3.matssocket">MatsSocketServer.MatsSocketEndpointIncomingContext</a>&lt;<a href="../MatsSocketServer.MatsSocketEndpointIncomingContext.html" title="type parameter in MatsSocketServer.MatsSocketEndpointIncomingContext">I</a>,<wbr><a href="../MatsSocketServer.MatsSocketEndpointIncomingContext.html" title="type parameter in MatsSocketServer.MatsSocketEndpointIncomingContext">MR</a>,<wbr><a href="../MatsSocketServer.MatsSocketEndpointIncomingContext.html" title="type parameter in MatsSocketServer.MatsSocketEndpointIncomingContext">R</a>&gt;, <a href="../MatsSocketServer.MatsSocketEndpointReplyContext.html" title="interface in io.mats3.matssocket">MatsSocketServer.MatsSocketEndpointReplyContext</a>&lt;<a href="../MatsSocketServer.MatsSocketEndpointReplyContext.html" title="type parameter in MatsSocketServer.MatsSocketEndpointReplyContext">I</a>,<wbr><a href="../MatsSocketServer.MatsSocketEndpointReplyContext.html" title="type parameter in MatsSocketServer.MatsSocketEndpointReplyContext">MR</a>,<wbr><a href="../MatsSocketServer.MatsSocketEndpointReplyContext.html" title="type parameter in MatsSocketServer.MatsSocketEndpointReplyContext">R</a>&gt;, <a href="../MatsSocketServer.MatsSocketEnvelopeDto.html" title="class in io.mats3.matssocket">MatsSocketServer.MatsSocketEnvelopeDto</a>, <a href="../MatsSocketServer.MatsSocketEnvelopeWithMetaDto.html" title="class in io.mats3.matssocket">MatsSocketServer.MatsSocketEnvelopeWithMetaDto</a>, <a href="../MatsSocketServer.MatsSocketSession.html" title="interface in io.mats3.matssocket">MatsSocketServer.MatsSocketSession</a>, <a href="../MatsSocketServer.MatsSocketSessionDto.html" title="class in io.mats3.matssocket">MatsSocketServer.MatsSocketSessionDto</a>, <a href="../MatsSocketServer.MessageEvent.html" title="interface in io.mats3.matssocket">MatsSocketServer.MessageEvent</a>, <a href="../MatsSocketServer.MessageEventListener.html" title="interface in io.mats3.matssocket">MatsSocketServer.MessageEventListener</a>, <a href="../MatsSocketServer.MessageType.html" title="enum class in io.mats3.matssocket">MatsSocketServer.MessageType</a>, <a href="../MatsSocketServer.ReplyAdapter.html" title="interface in io.mats3.matssocket">MatsSocketServer.ReplyAdapter</a>&lt;<a href="../MatsSocketServer.ReplyAdapter.html" title="type parameter in MatsSocketServer.ReplyAdapter">I</a>,<wbr><a href="../MatsSocketServer.ReplyAdapter.html" title="type parameter in MatsSocketServer.ReplyAdapter">MR</a>,<wbr><a href="../MatsSocketServer.ReplyAdapter.html" title="type parameter in MatsSocketServer.ReplyAdapter">R</a>&gt;, <a href="../MatsSocketServer.SessionEstablishedEvent.html" title="interface in io.mats3.matssocket">MatsSocketServer.SessionEstablishedEvent</a>, <a href="../MatsSocketServer.SessionEstablishedEventListener.html" title="interface in io.mats3.matssocket">MatsSocketServer.SessionEstablishedEventListener</a>, <a href="../MatsSocketServer.SessionRemovedEvent.html" title="interface in io.mats3.matssocket">MatsSocketServer.SessionRemovedEvent</a>, <a href="../MatsSocketServer.SessionRemovedEventListener.html" title="interface in io.mats3.matssocket">MatsSocketServer.SessionRemovedEventListener</a></code></div>
<div class="inherited-list">
<h2 id="nested-classes-inherited-from-class-io.mats3.matssocket.impl.MatsSocketStatics">Nested classes/interfaces inherited from interface&nbsp;io.mats3.matssocket.impl.<a href="MatsSocketStatics.html" title="interface in io.mats3.matssocket.impl">MatsSocketStatics</a></h2>
<code><a href="MatsSocketStatics.DebugStackTrace.html" title="class in io.mats3.matssocket.impl">MatsSocketStatics.DebugStackTrace</a>, <a href="MatsSocketStatics.DirectJson.html" title="class in io.mats3.matssocket.impl">MatsSocketStatics.DirectJson</a>, <a href="MatsSocketStatics.DirectJsonMessageHandlingDeserializer.html" title="class in io.mats3.matssocket.impl">MatsSocketStatics.DirectJsonMessageHandlingDeserializer</a>, <a href="MatsSocketStatics.MatsSocketEnvelopeDto_Mixin.html" title="class in io.mats3.matssocket.impl">MatsSocketStatics.MatsSocketEnvelopeDto_Mixin</a>, <a href="MatsSocketStatics.MessageToStringDeserializer.html" title="class in io.mats3.matssocket.impl">MatsSocketStatics.MessageToStringDeserializer</a>, <a href="MatsSocketStatics.SocketSendIOException.html" title="class in io.mats3.matssocket.impl">MatsSocketStatics.SocketSendIOException</a></code></div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#ALPHABET" class="member-name-link">ALPHABET</a></code></div>
<div class="col-last even-row-color">
<div class="block">A-Z, a-z, 0-9, which is 62 chars.</div>
</div>
<div class="col-first odd-row-color"><code>static final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#ALPHABET_JSON_ID" class="member-name-link">ALPHABET_JSON_ID</a></code></div>
<div class="col-last odd-row-color">
<div class="block">All chars from 20-7f, except:
 
 Space (32, 0x20) - since spaces are always annoying to use in Ids
 " (34, 0x22) - since this is the start and end symbol of a String
 \ (92 0x5c) - since this is the escape char
 DEL (127, 0x7f) - since this is a control char
 
 This is 92 chars.</div>
</div>
</div>
<div class="inherited-list">
<h3 id="fields-inherited-from-class-io.mats3.matssocket.impl.MatsSocketStatics">Fields inherited from interface&nbsp;io.mats3.matssocket.impl.<a href="MatsSocketStatics.html" title="interface in io.mats3.matssocket.impl">MatsSocketStatics</a></h3>
<code><a href="MatsSocketStatics.html#MAX_FORWARDER_POOL_SIZE">MAX_FORWARDER_POOL_SIZE</a>, <a href="MatsSocketStatics.html#MAX_LENGTH_OF_TOPIC_NAME">MAX_LENGTH_OF_TOPIC_NAME</a>, <a href="MatsSocketStatics.html#MAX_NUMBER_OF_COMPENSATING_TRANSACTIONS_ATTEMPTS">MAX_NUMBER_OF_COMPENSATING_TRANSACTIONS_ATTEMPTS</a>, <a href="MatsSocketStatics.html#MAX_NUMBER_OF_HELD_ENVELOPES_PER_SESSION">MAX_NUMBER_OF_HELD_ENVELOPES_PER_SESSION</a>, <a href="MatsSocketStatics.html#MAX_NUMBER_OF_MESSAGES_PER_FORWARD_LOOP">MAX_NUMBER_OF_MESSAGES_PER_FORWARD_LOOP</a>, <a href="MatsSocketStatics.html#MAX_NUMBER_OF_OUTBOX_STORE_ATTEMPTS_CSAF">MAX_NUMBER_OF_OUTBOX_STORE_ATTEMPTS_CSAF</a>, <a href="MatsSocketStatics.html#MAX_NUMBER_OF_RECORDED_ENVELOPES_PER_SESSION">MAX_NUMBER_OF_RECORDED_ENVELOPES_PER_SESSION</a>, <a href="MatsSocketStatics.html#MAX_NUMBER_OF_REDELIVERY_ATTEMPTS">MAX_NUMBER_OF_REDELIVERY_ATTEMPTS</a>, <a href="MatsSocketStatics.html#MAX_NUMBER_OF_SESSIONS_PER_USER_ID">MAX_NUMBER_OF_SESSIONS_PER_USER_ID</a>, <a href="MatsSocketStatics.html#MAX_NUMBER_OF_TOPICS_PER_SESSION">MAX_NUMBER_OF_TOPICS_PER_SESSION</a>, <a href="MatsSocketStatics.html#MAX_SIZE_OF_HELD_ENVELOPE_MSGS">MAX_SIZE_OF_HELD_ENVELOPE_MSGS</a>, <a href="MatsSocketStatics.html#MDC_CLIENT_APP_NAME_AND_VERSION">MDC_CLIENT_APP_NAME_AND_VERSION</a>, <a href="MatsSocketStatics.html#MDC_CLIENT_LIB_AND_VERSIONS">MDC_CLIENT_LIB_AND_VERSIONS</a>, <a href="MatsSocketStatics.html#MDC_CMID">MDC_CMID</a>, <a href="MatsSocketStatics.html#MDC_MESSAGE_TYPE">MDC_MESSAGE_TYPE</a>, <a href="MatsSocketStatics.html#MDC_PRINCIPAL_NAME">MDC_PRINCIPAL_NAME</a>, <a href="MatsSocketStatics.html#MDC_SESSION_ID">MDC_SESSION_ID</a>, <a href="MatsSocketStatics.html#MDC_SMID">MDC_SMID</a>, <a href="MatsSocketStatics.html#MDC_TRACE_ID">MDC_TRACE_ID</a>, <a href="MatsSocketStatics.html#MDC_USER_ID">MDC_USER_ID</a>, <a href="MatsSocketStatics.html#MILLIS_BETWEEN_COMPENSATING_TRANSACTIONS_ATTEMPTS">MILLIS_BETWEEN_COMPENSATING_TRANSACTIONS_ATTEMPTS</a>, <a href="MatsSocketStatics.html#MILLIS_BETWEEN_LIVELINESS_UPDATE_RUN">MILLIS_BETWEEN_LIVELINESS_UPDATE_RUN</a>, <a href="MatsSocketStatics.html#MILLIS_BETWEEN_SCAVENGE_SESSION_REMNANTS_RUN">MILLIS_BETWEEN_SCAVENGE_SESSION_REMNANTS_RUN</a>, <a href="MatsSocketStatics.html#MILLIS_BETWEEN_SESSION_TIMEOUT_RUN">MILLIS_BETWEEN_SESSION_TIMEOUT_RUN</a>, <a href="MatsSocketStatics.html#MILLIS_SESSION_TIMEOUT_SUPPLIER">MILLIS_SESSION_TIMEOUT_SUPPLIER</a>, <a href="MatsSocketStatics.html#MIN_FORWARDER_POOL_SIZE">MIN_FORWARDER_POOL_SIZE</a>, <a href="MatsSocketStatics.html#NUMBER_OF_OUTGOING_ENVELOPES_SCHEDULER_THREADS">NUMBER_OF_OUTGOING_ENVELOPES_SCHEDULER_THREADS</a>, <a href="MatsSocketStatics.html#THREAD_PREFIX">THREAD_PREFIX</a></code></div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#addMessageEventListener(io.mats3.matssocket.MatsSocketServer.MessageEventListener)" class="member-name-link">addMessageEventListener</a><wbr>(<a href="../MatsSocketServer.MessageEventListener.html" title="interface in io.mats3.matssocket">MatsSocketServer.MessageEventListener</a>&nbsp;listener)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block"><a href="../MatsSocketServer.MessageEventListener.html" title="interface in io.mats3.matssocket"><code>MessageEventListener</code></a>s will be invoked for every processed incoming and outgoing
 message for any session.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#addSessionEstablishedEventListener(io.mats3.matssocket.MatsSocketServer.SessionEstablishedEventListener)" class="member-name-link">addSessionEstablishedEventListener</a><wbr>(<a href="../MatsSocketServer.SessionEstablishedEventListener.html" title="interface in io.mats3.matssocket">MatsSocketServer.SessionEstablishedEventListener</a>&nbsp;listener)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block"><a href="../MatsSocketServer.SessionEstablishedEvent.html" title="interface in io.mats3.matssocket"><code>SessionEstablishedEvent</code></a> listeners will be invoked when an
 <a href="../MatsSocketServer.LiveMatsSocketSession.html" title="interface in io.mats3.matssocket"><code>LiveMatsSocketSession</code></a> is established <b>on this node</b> of the
 <a href="../MatsSocketServer.html" title="interface in io.mats3.matssocket"><code>MatsSocketServer</code></a> instance cluster, i.e.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#addSessionRemovedEventListener(io.mats3.matssocket.MatsSocketServer.SessionRemovedEventListener)" class="member-name-link">addSessionRemovedEventListener</a><wbr>(<a href="../MatsSocketServer.SessionRemovedEventListener.html" title="interface in io.mats3.matssocket">MatsSocketServer.SessionRemovedEventListener</a>&nbsp;listener)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block"><a href="../MatsSocketServer.SessionRemovedEvent.html" title="interface in io.mats3.matssocket"><code>MatsSocketServer.SessionRemovedEvent</code></a> listeners will be invoked when an <a href="../MatsSocketServer.LiveMatsSocketSession.html" title="interface in io.mats3.matssocket"><code>MatsSocketServer.LiveMatsSocketSession</code></a> is removed from this
 node of the <a href="../MatsSocketServer.html" title="interface in io.mats3.matssocket"><code>MatsSocketServer</code></a> instance cluster - this is both when a MatsSocketSession is
 <a href="../MatsSocketServer.SessionRemovedEvent.SessionRemovedEventType.html#DEREGISTER"><code>DEREGISTERed</code></a>, in which case the Client can still
 <a href="../MatsSocketServer.SessionEstablishedEvent.SessionEstablishedEventType.html#RECONNECT"><code>RECONNECT</code></a> to the same MatsSocketSessionId, and when a
 MatsSocketSession is <a href="../MatsSocketServer.SessionRemovedEvent.SessionRemovedEventType.html#CLOSE"><code>CLOSEd</code></a> or <a href="../MatsSocketServer.SessionRemovedEvent.SessionRemovedEventType.html#TIMEOUT"><code>TIMEOUTed</code></a>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#closeSession(java.lang.String,java.lang.String)" class="member-name-link">closeSession</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;matsSocketSessionId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;reason)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Closes the specified MatsSocketSession - can be used to forcibly close an active MatsSocketSession (i.e.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="../MatsSocketServer.html" title="interface in io.mats3.matssocket">MatsSocketServer</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#createMatsSocketServer(javax.websocket.server.ServerContainer,io.mats3.MatsFactory,io.mats3.matssocket.ClusterStoreAndForward,io.mats3.matssocket.AuthenticationPlugin,java.lang.String)" class="member-name-link">createMatsSocketServer</a><wbr>(javax.websocket.server.ServerContainer&nbsp;serverContainer,
 io.mats3.MatsFactory&nbsp;matsFactory,
 <a href="../ClusterStoreAndForward.html" title="interface in io.mats3.matssocket">ClusterStoreAndForward</a>&nbsp;clusterStoreAndForward,
 <a href="../AuthenticationPlugin.html" title="interface in io.mats3.matssocket">AuthenticationPlugin</a>&nbsp;authenticationPlugin,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;websocketPath)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Variant of the
 <a href="#createMatsSocketServer(javax.websocket.server.ServerContainer,io.mats3.MatsFactory,io.mats3.matssocket.ClusterStoreAndForward,io.mats3.matssocket.AuthenticationPlugin,java.lang.String,java.lang.String)"><code>full method</code></a> that uses the <code>appName</code> that the MatsFactory is configured with as
 the 'instanceName' parameter.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="../MatsSocketServer.html" title="interface in io.mats3.matssocket">MatsSocketServer</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#createMatsSocketServer(javax.websocket.server.ServerContainer,io.mats3.MatsFactory,io.mats3.matssocket.ClusterStoreAndForward,io.mats3.matssocket.AuthenticationPlugin,java.lang.String,java.lang.String)" class="member-name-link">createMatsSocketServer</a><wbr>(javax.websocket.server.ServerContainer&nbsp;serverContainer,
 io.mats3.MatsFactory&nbsp;matsFactory,
 <a href="../ClusterStoreAndForward.html" title="interface in io.mats3.matssocket">ClusterStoreAndForward</a>&nbsp;clusterStoreAndForward,
 <a href="../AuthenticationPlugin.html" title="interface in io.mats3.matssocket">AuthenticationPlugin</a>&nbsp;authenticationPlugin,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;instanceName,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;websocketPath)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Create a MatsSocketServer, piecing together necessary bits.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/SortedMap.html" title="class or interface in java.util" class="external-link">SortedMap</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="../MatsSocketServer.ActiveMatsSocketSessionDto.html" title="class in io.mats3.matssocket">MatsSocketServer.ActiveMatsSocketSessionDto</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getActiveMatsSocketSessions()" class="member-name-link">getActiveMatsSocketSessions</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This returns static, frozen-in-time, "copied-out" DTO-variants of the <a href="../MatsSocketServer.html#getLiveMatsSocketSessions()"><code>LiveMatsSocketSessions</code></a>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="IncomingSrrMsgHandler.html" title="class in io.mats3.matssocket.impl">IncomingSrrMsgHandler</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getIncomingSrrMsgHandler()" class="member-name-link">getIncomingSrrMsgHandler</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="../MatsSocketServer.LiveMatsSocketSession.html" title="interface in io.mats3.matssocket">MatsSocketServer.LiveMatsSocketSession</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getLiveMatsSocketSessions()" class="member-name-link">getLiveMatsSocketSessions</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Imagine that the MatsSocketServer uses a <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ConcurrentMap.html" title="class or interface in java.util.concurrent" class="external-link"><code>ConcurrentMap</code></a> to keep its set of local, live, currently
 connected MatsSocketSessions.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/SortedMap.html" title="class or interface in java.util" class="external-link">SortedMap</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="../MatsSocketServer.MatsSocketEndpoint.html" title="interface in io.mats3.matssocket">MatsSocketServer.MatsSocketEndpoint</a>&lt;?,<wbr>?,<wbr>?&gt;&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getMatsSocketEndpoints()" class="member-name-link">getMatsSocketEndpoints</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../MatsSocketServer.MatsSocketSessionDto.html" title="class in io.mats3.matssocket">MatsSocketServer.MatsSocketSessionDto</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getMatsSocketSessions(boolean,java.lang.String,java.lang.String,java.lang.String)" class="member-name-link">getMatsSocketSessions</a><wbr>(boolean&nbsp;onlyActive,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;userId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;appName,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;appVersionAtOrAbove)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Unless restricted by the "constraint parameters", this method returns <i>all</i> MatsSocketSessions on this
 MatsSocketServer instance, regardless of whether the session currently is connected, and if connected, which node
 it is connected to.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getMatsSocketSessionsCount(boolean,java.lang.String,java.lang.String,java.lang.String)" class="member-name-link">getMatsSocketSessionsCount</a><wbr>(boolean&nbsp;onlyActive,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;userId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;appName,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;appVersionAtOrAbove)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Like <a href="../MatsSocketServer.html#getMatsSocketSessions(boolean,java.lang.String,java.lang.String,java.lang.String)"><code>MatsSocketServer.getMatsSocketSessions(boolean, String, String, String)</code></a>, only returning the count - this might be
 interesting if there are very many sessions, and you do not need the full DTOs of every Session, just the count
 for a metric to graph or similar.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="WebSocketOutgoingEnvelopes.html" title="class in io.mats3.matssocket.impl">WebSocketOutgoingEnvelopes</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getWebSocketOutgoingEnvelopes()" class="member-name-link">getWebSocketOutgoingEnvelopes</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>&lt;I,<wbr>
MR,<wbr>
R&gt;&nbsp;<a href="../MatsSocketServer.MatsSocketEndpoint.html" title="interface in io.mats3.matssocket">MatsSocketServer.MatsSocketEndpoint</a>&lt;I,<wbr>MR,<wbr>R&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#matsSocketEndpoint(java.lang.String,java.lang.Class,java.lang.Class,java.lang.Class,io.mats3.matssocket.MatsSocketServer.IncomingAuthorizationAndAdapter,io.mats3.matssocket.MatsSocketServer.ReplyAdapter)" class="member-name-link">matsSocketEndpoint</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;matsSocketEndpointId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;I&gt;&nbsp;incomingClass,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;MR&gt;&nbsp;matsReplyClass,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;R&gt;&nbsp;msReplyClass,
 <a href="../MatsSocketServer.IncomingAuthorizationAndAdapter.html" title="interface in io.mats3.matssocket">MatsSocketServer.IncomingAuthorizationAndAdapter</a>&lt;I,<wbr>MR,<wbr>R&gt;&nbsp;incomingAuthEval,
 <a href="../MatsSocketServer.ReplyAdapter.html" title="interface in io.mats3.matssocket">MatsSocketServer.ReplyAdapter</a>&lt;I,<wbr>MR,<wbr>R&gt;&nbsp;replyAdapter)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Registers a MatsSocket Endpoint, including a <a href="../MatsSocketServer.ReplyAdapter.html" title="interface in io.mats3.matssocket"><code>MatsSocketServer.ReplyAdapter</code></a> which can adapt the reply from the Mats
 endpoint before being fed back to the MatsSocket - and also decide whether to resolve or reject the waiting
 Client Promise.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#publish(java.lang.String,java.lang.String,java.lang.Object)" class="member-name-link">publish</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;traceId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;topicId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;messageDto)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Publish a Message to the specified Topic, with the specified TraceId.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#request(java.lang.String,java.lang.String,java.lang.String,java.lang.Object,java.lang.String,java.lang.String,byte%5B%5D)" class="member-name-link">request</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;sessionId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;traceId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;clientEndpointId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;requestDto,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;replyToMatsSocketTerminatorId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;correlationString,
 byte[]&nbsp;correlationBinary)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Initiates a request to the specified MatsSocketSession, to the specified Client EndpointId, with a replyTo
 specified to (typically) a <a href="../MatsSocketServer.html#matsSocketTerminator(java.lang.String,java.lang.Class,io.mats3.matssocket.MatsSocketServer.IncomingAuthorizationAndAdapter)"><code>MatsSocket terminator</code></a> - which includes a String "correlationString" and byte array "correlationBinary" which can
 be used to correlate the reply to the request (available
 <a href="../MatsSocketServer.MatsSocketEndpointIncomingContext.html#getCorrelationString()"><code>here</code></a> and
 <a href="../MatsSocketServer.MatsSocketEndpointIncomingContext.html#getCorrelationBinary()"><code>here</code></a> for the reply processing).</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#send(java.lang.String,java.lang.String,java.lang.String,java.lang.Object)" class="member-name-link">send</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;sessionId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;traceId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;clientTerminatorId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;messageDto)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Sends a message to the specified MatsSocketSession, to the specified Client TerminatorId.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#stop(int)" class="member-name-link">stop</a><wbr>(int&nbsp;gracefulShutdownMillis)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Closes all <a href="../MatsSocketServer.ActiveMatsSocketSession.html" title="interface in io.mats3.matssocket"><code>MatsSocketServer.ActiveMatsSocketSession</code></a> on this node, closing the WebSocket with
 <code>CloseReason.CloseCodes.SERVICE_RESTART</code> (assuming that a MatsSocket service will never truly go down, thus effectively
 asking the client to reconnect, hopefully to another instance).</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-io.mats3.matssocket.MatsSocketServer">Methods inherited from interface&nbsp;io.mats3.matssocket.<a href="../MatsSocketServer.html" title="interface in io.mats3.matssocket">MatsSocketServer</a></h3>
<code><a href="../MatsSocketServer.html#matsSocketDirectReplyEndpoint(java.lang.String,java.lang.Class,java.lang.Class,io.mats3.matssocket.MatsSocketServer.IncomingAuthorizationAndAdapter)">matsSocketDirectReplyEndpoint</a>, <a href="../MatsSocketServer.html#matsSocketEndpoint(java.lang.String,java.lang.Class,java.lang.Class,io.mats3.matssocket.MatsSocketServer.IncomingAuthorizationAndAdapter)">matsSocketEndpoint</a>, <a href="../MatsSocketServer.html#matsSocketTerminator(java.lang.String,java.lang.Class,io.mats3.matssocket.MatsSocketServer.IncomingAuthorizationAndAdapter)">matsSocketTerminator</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-io.mats3.matssocket.impl.MatsSocketStatics">Methods inherited from interface&nbsp;io.mats3.matssocket.impl.<a href="MatsSocketStatics.html" title="interface in io.mats3.matssocket.impl">MatsSocketStatics</a></h3>
<code><a href="MatsSocketStatics.html#jacksonMapper()">jacksonMapper</a>, <a href="MatsSocketStatics.html#ms(long)">ms</a>, <a href="MatsSocketStatics.html#msSince(long)">msSince</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="ALPHABET">
<h3>ALPHABET</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">ALPHABET</span></div>
<div class="block">A-Z, a-z, 0-9, which is 62 chars.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#io.mats3.matssocket.impl.DefaultMatsSocketServer.ALPHABET">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="ALPHABET_JSON_ID">
<h3>ALPHABET_JSON_ID</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">ALPHABET_JSON_ID</span></div>
<div class="block">All chars from 20-7f, except:
 <ul>
 <li>Space (32, 0x20) - since spaces are always annoying to use in Ids</li>
 <li>" (34, 0x22) - since this is the start and end symbol of a String</li>
 <li>\ (92 0x5c) - since this is the escape char</li>
 <li>DEL (127, 0x7f) - since this is a control char</li>
 </ul>
 This is 92 chars.</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="createMatsSocketServer(javax.websocket.server.ServerContainer,io.mats3.MatsFactory,io.mats3.matssocket.ClusterStoreAndForward,io.mats3.matssocket.AuthenticationPlugin,java.lang.String)">
<h3>createMatsSocketServer</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="../MatsSocketServer.html" title="interface in io.mats3.matssocket">MatsSocketServer</a></span>&nbsp;<span class="element-name">createMatsSocketServer</span><wbr><span class="parameters">(javax.websocket.server.ServerContainer&nbsp;serverContainer,
 io.mats3.MatsFactory&nbsp;matsFactory,
 <a href="../ClusterStoreAndForward.html" title="interface in io.mats3.matssocket">ClusterStoreAndForward</a>&nbsp;clusterStoreAndForward,
 <a href="../AuthenticationPlugin.html" title="interface in io.mats3.matssocket">AuthenticationPlugin</a>&nbsp;authenticationPlugin,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;websocketPath)</span></div>
<div class="block">Variant of the
 <a href="#createMatsSocketServer(javax.websocket.server.ServerContainer,io.mats3.MatsFactory,io.mats3.matssocket.ClusterStoreAndForward,io.mats3.matssocket.AuthenticationPlugin,java.lang.String,java.lang.String)"><code>full method</code></a> that uses the <code>appName</code> that the MatsFactory is configured with as
 the 'instanceName' parameter.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>serverContainer</code> - the WebSocket <code>ServerContainer</code>, typically gotten from the Servlet Container.</dd>
<dd><code>matsFactory</code> - The <code>MatsFactory</code> which we should hook into for both sending requests and setting up endpoints
            to receive replies.</dd>
<dd><code>clusterStoreAndForward</code> - an implementation of <a href="../ClusterStoreAndForward.html" title="interface in io.mats3.matssocket"><code>ClusterStoreAndForward</code></a> which temporarily holds replies while finding the
            right node that holds the WebSocket connection - and hold them till the client reconnects in case he
            has disconnected in the mean time.</dd>
<dd><code>authenticationPlugin</code> - the piece of code that turns an Authorization String into a Principal. Must be pretty fast, as it is
            invoked synchronously - keep any IPC fast, otherwise all your threads of the container might be used
            up. If the function throws or returns null, authorization did not go through.</dd>
<dd><code>websocketPath</code> - The path onto which the WebSocket Server Endpoint will be mounted. Suggestion: "/matssocket". If you
            need multiple <a href="../MatsSocketServer.html" title="interface in io.mats3.matssocket"><code>MatsSocketServer</code></a>s, e.g. because you need two types of authentication, they need
            to be mounted on different paths.</dd>
<dt>Returns:</dt>
<dd>a MatsSocketServer instance, now hooked into both the WebSocket <code>ServerContainer</code> and the
         <code>MatsFactory</code>.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createMatsSocketServer(javax.websocket.server.ServerContainer,io.mats3.MatsFactory,io.mats3.matssocket.ClusterStoreAndForward,io.mats3.matssocket.AuthenticationPlugin,java.lang.String,java.lang.String)">
<h3>createMatsSocketServer</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="../MatsSocketServer.html" title="interface in io.mats3.matssocket">MatsSocketServer</a></span>&nbsp;<span class="element-name">createMatsSocketServer</span><wbr><span class="parameters">(javax.websocket.server.ServerContainer&nbsp;serverContainer,
 io.mats3.MatsFactory&nbsp;matsFactory,
 <a href="../ClusterStoreAndForward.html" title="interface in io.mats3.matssocket">ClusterStoreAndForward</a>&nbsp;clusterStoreAndForward,
 <a href="../AuthenticationPlugin.html" title="interface in io.mats3.matssocket">AuthenticationPlugin</a>&nbsp;authenticationPlugin,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;instanceName,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;websocketPath)</span></div>
<div class="block">Create a MatsSocketServer, piecing together necessary bits.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>serverContainer</code> - the WebSocket <code>ServerContainer</code>, typically gotten from the Servlet Container.</dd>
<dd><code>matsFactory</code> - The <code>MatsFactory</code> which we should hook into for both sending requests and setting up endpoints
            to receive replies.</dd>
<dd><code>clusterStoreAndForward</code> - an implementation of <a href="../ClusterStoreAndForward.html" title="interface in io.mats3.matssocket"><code>ClusterStoreAndForward</code></a> which temporarily holds replies while finding the
            right node that holds the WebSocket connection - and hold them till the client reconnects in case he
            has disconnected in the mean time.</dd>
<dd><code>authenticationPlugin</code> - the piece of code that turns an Authorization String into a Principal. Must be pretty fast, as it is
            invoked synchronously - keep any IPC fast, otherwise all your threads of the container might be used
            up. If the function throws or returns null, authorization did not go through.</dd>
<dd><code>instanceName</code> - a unique name of this MatsSocketServer setup, at least within the MQ system the MatsFactory is
            connected to, as it is used to postfix/uniquify the endpoints that the MatsSocketServer creates on the
            MatsFactory. To illustrate: The variant of this factory method that does not take 'instanceName' uses
            the <code>appName</code> that the MatsFactory is configured with.</dd>
<dd><code>websocketPath</code> - The path onto which the WebSocket Server Endpoint will be mounted. Suggestion: "/matssocket". If you
            need multiple <a href="../MatsSocketServer.html" title="interface in io.mats3.matssocket"><code>MatsSocketServer</code></a>s, e.g. because you need two types of authentication, they need
            to be mounted on different paths.</dd>
<dt>Returns:</dt>
<dd>a MatsSocketServer instance, now hooked into both the WebSocket <code>ServerContainer</code> and the
         <code>MatsFactory</code>.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getWebSocketOutgoingEnvelopes()">
<h3>getWebSocketOutgoingEnvelopes</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="WebSocketOutgoingEnvelopes.html" title="class in io.mats3.matssocket.impl">WebSocketOutgoingEnvelopes</a></span>&nbsp;<span class="element-name">getWebSocketOutgoingEnvelopes</span>()</div>
</section>
</li>
<li>
<section class="detail" id="getIncomingSrrMsgHandler()">
<h3>getIncomingSrrMsgHandler</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="IncomingSrrMsgHandler.html" title="class in io.mats3.matssocket.impl">IncomingSrrMsgHandler</a></span>&nbsp;<span class="element-name">getIncomingSrrMsgHandler</span>()</div>
</section>
</li>
<li>
<section class="detail" id="matsSocketEndpoint(java.lang.String,java.lang.Class,java.lang.Class,java.lang.Class,io.mats3.matssocket.MatsSocketServer.IncomingAuthorizationAndAdapter,io.mats3.matssocket.MatsSocketServer.ReplyAdapter)">
<h3>matsSocketEndpoint</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="type-parameters">&lt;I,<wbr>
MR,<wbr>
R&gt;</span>
<span class="return-type"><a href="../MatsSocketServer.MatsSocketEndpoint.html" title="interface in io.mats3.matssocket">MatsSocketServer.MatsSocketEndpoint</a>&lt;I,<wbr>MR,<wbr>R&gt;</span>&nbsp;<span class="element-name">matsSocketEndpoint</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;matsSocketEndpointId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;I&gt;&nbsp;incomingClass,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;MR&gt;&nbsp;matsReplyClass,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;R&gt;&nbsp;msReplyClass,
 <a href="../MatsSocketServer.IncomingAuthorizationAndAdapter.html" title="interface in io.mats3.matssocket">MatsSocketServer.IncomingAuthorizationAndAdapter</a>&lt;I,<wbr>MR,<wbr>R&gt;&nbsp;incomingAuthEval,
 <a href="../MatsSocketServer.ReplyAdapter.html" title="interface in io.mats3.matssocket">MatsSocketServer.ReplyAdapter</a>&lt;I,<wbr>MR,<wbr>R&gt;&nbsp;replyAdapter)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../MatsSocketServer.html#matsSocketEndpoint(java.lang.String,java.lang.Class,java.lang.Class,java.lang.Class,io.mats3.matssocket.MatsSocketServer.IncomingAuthorizationAndAdapter,io.mats3.matssocket.MatsSocketServer.ReplyAdapter)">MatsSocketServer</a></code></span></div>
<div class="block">Registers a MatsSocket Endpoint, including a <a href="../MatsSocketServer.ReplyAdapter.html" title="interface in io.mats3.matssocket"><code>MatsSocketServer.ReplyAdapter</code></a> which can adapt the reply from the Mats
 endpoint before being fed back to the MatsSocket - and also decide whether to resolve or reject the waiting
 Client Promise.
 <p/>
 NOTE: If you supply <code>MatsObject</code> as the type 'MR', you will get such an instance, and can decide
 yourself what to deserialize it to - it will be like having a Java method taking Object as argument. However,
 there is no "instanceof" functionality, so you will need to know what type of object it is by other means, e.g.
 by putting some up-flow information on the Mats <code>ProcessContext</code> as a
 <code>TraceProperty</code>.
 <p/>
 NOTE: You need not be specific with the 'R' type being created in the <a href="../MatsSocketServer.ReplyAdapter.html" title="interface in io.mats3.matssocket"><code>MatsSocketServer.ReplyAdapter</code></a> - it can be any
 superclass of your intended Reply DTO(s), up to <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link"><code>Object</code></a>. However, the introspection aspects will take a
 hit, i.e. when listing <a href="../MatsSocketServer.html#getMatsSocketEndpoints()"><code>all MatsSocketEndpoints</code></a> on some monitoring/introspection
 page. This is also a bit like with Java: Methods returning Object as return type are annoying, but can
 potentially be of value in certain convoluted scenarios.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../MatsSocketServer.html#matsSocketEndpoint(java.lang.String,java.lang.Class,java.lang.Class,java.lang.Class,io.mats3.matssocket.MatsSocketServer.IncomingAuthorizationAndAdapter,io.mats3.matssocket.MatsSocketServer.ReplyAdapter)">matsSocketEndpoint</a></code>&nbsp;in interface&nbsp;<code><a href="../MatsSocketServer.html" title="interface in io.mats3.matssocket">MatsSocketServer</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="send(java.lang.String,java.lang.String,java.lang.String,java.lang.Object)">
<h3>send</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">send</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;sessionId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;traceId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;clientTerminatorId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;messageDto)</span>
          throws <span class="exceptions"><a href="../MatsSocketServer.DataStoreException.html" title="class in io.mats3.matssocket">MatsSocketServer.DataStoreException</a></span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../MatsSocketServer.html#send(java.lang.String,java.lang.String,java.lang.String,java.lang.Object)">MatsSocketServer</a></code></span></div>
<div class="block">Sends a message to the specified MatsSocketSession, to the specified Client TerminatorId. This is "fire into the
 void" style messaging, where you have no idea of whether the client received the message. Usage scenarios include
 <i>"New information about order progress"</i> which may or may not include said information (if not included, the
 client must do a request to update) - but where the server does not really care if the client gets the
 information, only that <i>if</i> he actually has the webpage/app open at the time, he will get the message and
 thus update his view of the changed world.
 <p/>
 Note: If the specified session is closed when this method is invoked, the message will (effectively) silently be
 dropped. Even if you just got hold of the sessionId and it was active then, it might asynchronously close while
 you invoke this method.
 <p/>
 Note: The message is put in the outbox, and if the session is actually connected, it will be delivered ASAP,
 otherwise it will rest in the outbox for delivery once the session reconnects. If the session then closes or
 times out while the message is in the outbox, it will be deleted.
 <p/>
 Note: Given that the session actually is live and the client is connected or connects before the session is
 closed or times out, the guaranteed delivery and exactly-once features are in effect, and this still holds in
 face of session reconnects.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../MatsSocketServer.html#send(java.lang.String,java.lang.String,java.lang.String,java.lang.Object)">send</a></code>&nbsp;in interface&nbsp;<code><a href="../MatsSocketServer.html" title="interface in io.mats3.matssocket">MatsSocketServer</a></code></dd>
<dt>Throws:</dt>
<dd><code><a href="../MatsSocketServer.DataStoreException.html" title="class in io.mats3.matssocket">MatsSocketServer.DataStoreException</a></code> - if the <a href="../ClusterStoreAndForward.html" title="interface in io.mats3.matssocket"><code>ClusterStoreAndForward</code></a> makes any problems when putting the outgoing message in the
             outbox.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="request(java.lang.String,java.lang.String,java.lang.String,java.lang.Object,java.lang.String,java.lang.String,byte[])">
<h3>request</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">request</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;sessionId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;traceId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;clientEndpointId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;requestDto,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;replyToMatsSocketTerminatorId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;correlationString,
 byte[]&nbsp;correlationBinary)</span>
             throws <span class="exceptions"><a href="../MatsSocketServer.DataStoreException.html" title="class in io.mats3.matssocket">MatsSocketServer.DataStoreException</a></span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../MatsSocketServer.html#request(java.lang.String,java.lang.String,java.lang.String,java.lang.Object,java.lang.String,java.lang.String,byte%5B%5D)">MatsSocketServer</a></code></span></div>
<div class="block">Initiates a request to the specified MatsSocketSession, to the specified Client EndpointId, with a replyTo
 specified to (typically) a <a href="../MatsSocketServer.html#matsSocketTerminator(java.lang.String,java.lang.Class,io.mats3.matssocket.MatsSocketServer.IncomingAuthorizationAndAdapter)"><code>MatsSocket terminator</code></a> - which includes a String "correlationString" and byte array "correlationBinary" which can
 be used to correlate the reply to the request (available
 <a href="../MatsSocketServer.MatsSocketEndpointIncomingContext.html#getCorrelationString()"><code>here</code></a> and
 <a href="../MatsSocketServer.MatsSocketEndpointIncomingContext.html#getCorrelationBinary()"><code>here</code></a> for the reply processing). Do note that
 since you have no control of when the Client decides to close the browser or terminate the app, you have no
 guarantee that a reply will ever come - so code accordingly.
 <p/>
 Note: the <code>correlationString</code> and <code>correlationBinary</code> are not sent over to the client, but stored
 server side in the <a href="../ClusterStoreAndForward.html" title="interface in io.mats3.matssocket"><code>ClusterStoreAndForward</code></a>. This both means that you do not need to be afraid of size (but
 storing megabytes is silly anyway), but more importantly, this data cannot be tampered with client side - you can
 be safe that what you gave in here is what you get out in the
 <a href="../MatsSocketServer.MatsSocketEndpointIncomingContext.html#getCorrelationString()"><code>context.getCorrelationString()</code></a> and
 <a href="../MatsSocketServer.MatsSocketEndpointIncomingContext.html#getCorrelationBinary()"><code>context.getCorrelationBinary()</code></a>.
 <p/>
 Note: To check whether the client Resolved or Rejected the request, use
 <a href="../MatsSocketServer.MatsSocketEndpointIncomingContext.html#getMessageType()"><code>MatsSocketServer.MatsSocketEndpointIncomingContext.getMessageType()</code></a>.
 <p/>
 Note: If the specified session is closed when this method is invoked, the message will (effectively) silently be
 dropped. Even if you just got hold of the sessionId and it was active then, it might asynchronously close while
 you invoke this method.
 <p/>
 Note: The message is put in the outbox, and if the session is actually connected, it will be delivered ASAP,
 otherwise it will rest in the outbox for delivery once the session reconnects. If the session then closes or
 times out while the message is in the outbox, it will be deleted.
 <p/>
 Note: Given that the session actually is live and the client is connected or connects before the session is
 closed or times out, the guaranteed delivery and exactly-once features are in effect, and this still holds in
 face of session reconnects.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../MatsSocketServer.html#request(java.lang.String,java.lang.String,java.lang.String,java.lang.Object,java.lang.String,java.lang.String,byte%5B%5D)">request</a></code>&nbsp;in interface&nbsp;<code><a href="../MatsSocketServer.html" title="interface in io.mats3.matssocket">MatsSocketServer</a></code></dd>
<dt>Throws:</dt>
<dd><code><a href="../MatsSocketServer.DataStoreException.html" title="class in io.mats3.matssocket">MatsSocketServer.DataStoreException</a></code> - if the <a href="../ClusterStoreAndForward.html" title="interface in io.mats3.matssocket"><code>ClusterStoreAndForward</code></a> makes any problems when putting the outgoing message in the
             outbox.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="publish(java.lang.String,java.lang.String,java.lang.Object)">
<h3>publish</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">publish</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;traceId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;topicId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;messageDto)</span>
             throws <span class="exceptions">io.mats3.MatsInitiator.MatsBackendRuntimeException</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../MatsSocketServer.html#publish(java.lang.String,java.lang.String,java.lang.Object)">MatsSocketServer</a></code></span></div>
<div class="block">Publish a Message to the specified Topic, with the specified TraceId. This is pretty much a direct invocation of
 <code>MatsInitiator.MatsInitiate.publish(Object)</code> on the <code>MatsFactory</code>, and thus you might get the
 <code>MatsInitiator.MatsBackendRuntimeException</code> which <code>MatsInitiator.initiateUnchecked(InitiateLambda)</code> raises.
 <p/>
 Note: A published message will be broadcast to all nodes in the MatsSocketServer instance (where each instance
 then evaluates if it have subscribers to the topic and forwards to those). In addition, a certain number of
 messages per topic will be retained in memory to support "replay of lost messages" when a Client looses
 connection and must reconnect. You should consider these facts when designing usage of pub/sub. Messages over
 topics should generally be of interest to more than one party. While it is certainly feasible to have
 user-specific, or even session-specific topics, which could be authorized to only be subscribable by the "owning
 user" or even "owning session" (by use of the
 <a href="../AuthenticationPlugin.SessionAuthenticator.html#authorizeUserForTopic(io.mats3.matssocket.AuthenticationPlugin.AuthenticationContext,java.lang.String)"><code>AuthenticationPlugin</code></a>), the
 current implementation of pub/sub will result in quite a bit of overhead with extensive use of such an approach.
 Also, even for messages that are of interest to multiple parties, you should consider the size of the messages:
 Maybe not send large PDFs or the entire ISO-images of "newly arrived BlueRays" over a topic - instead send a
 small notification about the fresh BlueRay availability including just essential information and an id, and then
 the client can decide whether he wants to download it.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../MatsSocketServer.html#publish(java.lang.String,java.lang.String,java.lang.Object)">publish</a></code>&nbsp;in interface&nbsp;<code><a href="../MatsSocketServer.html" title="interface in io.mats3.matssocket">MatsSocketServer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>traceId</code> - traceId for the flow.</dd>
<dd><code>topicId</code> - which Topic to Publish on.</dd>
<dd><code>messageDto</code> - the message to Publish.</dd>
<dt>Throws:</dt>
<dd><code>io.mats3.MatsInitiator.MatsBackendRuntimeException</code> - if the Mats implementation cannot connect to the underlying message broker, or are having problems
             interacting with it.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getMatsSocketEndpoints()">
<h3>getMatsSocketEndpoints</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/SortedMap.html" title="class or interface in java.util" class="external-link">SortedMap</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="../MatsSocketServer.MatsSocketEndpoint.html" title="interface in io.mats3.matssocket">MatsSocketServer.MatsSocketEndpoint</a>&lt;?,<wbr>?,<wbr>?&gt;&gt;</span>&nbsp;<span class="element-name">getMatsSocketEndpoints</span>()</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../MatsSocketServer.html#getMatsSocketEndpoints()">getMatsSocketEndpoints</a></code>&nbsp;in interface&nbsp;<code><a href="../MatsSocketServer.html" title="interface in io.mats3.matssocket">MatsSocketServer</a></code></dd>
<dt>Returns:</dt>
<dd>all registered MatsSocketEndpoints, as a <code>SortedMap[endpointId, endpoint]</code>.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getMatsSocketSessions(boolean,java.lang.String,java.lang.String,java.lang.String)">
<h3>getMatsSocketSessions</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../MatsSocketServer.MatsSocketSessionDto.html" title="class in io.mats3.matssocket">MatsSocketServer.MatsSocketSessionDto</a>&gt;</span>&nbsp;<span class="element-name">getMatsSocketSessions</span><wbr><span class="parameters">(boolean&nbsp;onlyActive,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;userId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;appName,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;appVersionAtOrAbove)</span>
                                                                  throws <span class="exceptions"><a href="../MatsSocketServer.DataStoreException.html" title="class in io.mats3.matssocket">MatsSocketServer.DataStoreException</a></span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../MatsSocketServer.html#getMatsSocketSessions(boolean,java.lang.String,java.lang.String,java.lang.String)">MatsSocketServer</a></code></span></div>
<div class="block">Unless restricted by the "constraint parameters", this method returns <i>all</i> MatsSocketSessions on this
 MatsSocketServer instance, regardless of whether the session currently is connected, and if connected, which node
 it is connected to. This is done by reading from the <a href="../ClusterStoreAndForward.html" title="interface in io.mats3.matssocket"><code>data store</code></a>, as opposed to
 methods <a href="../MatsSocketServer.html#getActiveMatsSocketSessions()"><code>MatsSocketServer.getActiveMatsSocketSessions()</code></a> and <a href="../MatsSocketServer.html#getLiveMatsSocketSessions()"><code>MatsSocketServer.getLiveMatsSocketSessions()</code></a>, which returns result
 from <i>this node's</i> internal structures - and therefore only returns sessions that are connected <i>right
 now</i>, and are connected to <i>this node</i>. This means that you will get returned both connected sessions,
 and sessions that are not currently connected (unless restricting this via parameter 'onlyActive'). The latter
 implies that they are state=<a href="../MatsSocketServer.ActiveMatsSocketSession.MatsSocketSessionState.html#DEREGISTERED"><code>MatsSocketServer.ActiveMatsSocketSession.MatsSocketSessionState.DEREGISTERED</code></a>, and the
 <a href="../MatsSocketServer.MatsSocketSession.html#getNodeName()"><code>MatsSocketServer.MatsSocketSession.getNodeName()</code></a> returns <code>Optional.empty()</code>.
 <p/>
 The parameters are constraints - if a parameter is <code>null</code> or <code>false</code>, that parameter is not
 used in the search criteria, while if it is set, that parameter will constrain the search.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../MatsSocketServer.html#getMatsSocketSessions(boolean,java.lang.String,java.lang.String,java.lang.String)">getMatsSocketSessions</a></code>&nbsp;in interface&nbsp;<code><a href="../MatsSocketServer.html" title="interface in io.mats3.matssocket">MatsSocketServer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>onlyActive</code> - If <code>true</code>, only returns "active" MatsSocketSessions, currently being connected to some
            node, i.e. having <a href="../MatsSocketServer.MatsSocketSession.html#getNodeName()"><code>MatsSocketServer.MatsSocketSession.getNodeName()</code></a> NOT returning <code>Optional.empty()</code>.</dd>
<dd><code>userId</code> - If non-<code>null</code>, restricts the results to sessions for this particular userId</dd>
<dd><code>appName</code> - If non-<code>null</code>, restricts the results to sessions for this particular app-name. Do realize
            that it is the Client that specifies this value, there is no restriction and you cannot trust that
            this String falls within your expected values.</dd>
<dd><code>appVersionAtOrAbove</code> - If non-<code>null</code>, restricts the results to sessions having app-version at or above the
            specified value, using ordinary alphanum comparison. Do realize that it is the Client that specifies
            this value, there is no restriction and you cannot trust that this String falls within your expected
            values.</dd>
<dt>Returns:</dt>
<dd>the list of all MatsSocketSessions currently registered with this MatsSocketServer instance matching the
         constraints if set - as read from the <a href="../ClusterStoreAndForward.html" title="interface in io.mats3.matssocket"><code>data store</code></a>.</dd>
<dt>Throws:</dt>
<dd><code><a href="../MatsSocketServer.DataStoreException.html" title="class in io.mats3.matssocket">MatsSocketServer.DataStoreException</a></code> - if the <a href="../ClusterStoreAndForward.html" title="interface in io.mats3.matssocket"><code>ClusterStoreAndForward</code></a> makes any problems when reading sessions from it.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getMatsSocketSessionsCount(boolean,java.lang.String,java.lang.String,java.lang.String)">
<h3>getMatsSocketSessionsCount</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getMatsSocketSessionsCount</span><wbr><span class="parameters">(boolean&nbsp;onlyActive,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;userId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;appName,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;appVersionAtOrAbove)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../MatsSocketServer.html#getMatsSocketSessionsCount(boolean,java.lang.String,java.lang.String,java.lang.String)">MatsSocketServer</a></code></span></div>
<div class="block">Like <a href="../MatsSocketServer.html#getMatsSocketSessions(boolean,java.lang.String,java.lang.String,java.lang.String)"><code>MatsSocketServer.getMatsSocketSessions(boolean, String, String, String)</code></a>, only returning the count - this might be
 interesting if there are very many sessions, and you do not need the full DTOs of every Session, just the count
 for a metric to graph or similar.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../MatsSocketServer.html#getMatsSocketSessionsCount(boolean,java.lang.String,java.lang.String,java.lang.String)">getMatsSocketSessionsCount</a></code>&nbsp;in interface&nbsp;<code><a href="../MatsSocketServer.html" title="interface in io.mats3.matssocket">MatsSocketServer</a></code></dd>
<dt>Returns:</dt>
<dd>the count of all MatsSocketSessions currently registered with this MatsSocketServer instance matching the
         constraints if set - as read from the <a href="../ClusterStoreAndForward.html" title="interface in io.mats3.matssocket"><code>data store</code></a>.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getActiveMatsSocketSessions()">
<h3>getActiveMatsSocketSessions</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/SortedMap.html" title="class or interface in java.util" class="external-link">SortedMap</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="../MatsSocketServer.ActiveMatsSocketSessionDto.html" title="class in io.mats3.matssocket">MatsSocketServer.ActiveMatsSocketSessionDto</a>&gt;</span>&nbsp;<span class="element-name">getActiveMatsSocketSessions</span>()</div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../MatsSocketServer.html#getActiveMatsSocketSessions()">MatsSocketServer</a></code></span></div>
<div class="block">This returns static, frozen-in-time, "copied-out" DTO-variants of the <a href="../MatsSocketServer.html#getLiveMatsSocketSessions()"><code>LiveMatsSocketSessions</code></a>. Please observe the difference between <a href="../MatsSocketServer.ActiveMatsSocketSession.html" title="interface in io.mats3.matssocket"><code>MatsSocketServer.ActiveMatsSocketSession</code></a> and
 <a href="../MatsSocketServer.LiveMatsSocketSession.html" title="interface in io.mats3.matssocket"><code>MatsSocketServer.LiveMatsSocketSession</code></a>. If you have a massive amount of sessions, and only need the sessions for
 appName="MegaCorpWebBank", then you should consider not employing this method, but instead do a variant of what
 this method does, where you restrict the "copy out" to the relevant sessions:

 <pre>
 SortedMap&lt;String, ActiveMatsSocketSessionDto&gt; ret = new TreeMap&lt;&gt;();
 for (LiveMatsSocketSession liveSession : getLiveMatsSocketSessions().values()) {
     // === HERE YOU MAY ADD CRITERIA on the LiveMatsSocketSession, doing 'continue' if not matched ===
     // :: "Copy it out"
     ActiveMatsSocketSessionDto activeSession = liveSession.toActiveMatsSocketSession();
     // ?: Check that the LiveSession is still SESSION_ESTABLISHED
     if (liveSession.getState() != MatsSocketSessionState.SESSION_ESTABLISHED) {
         // -&gt; No, it changed during copying, so then we drop this.
         continue;
     }
     // Add to result Map
     ret.put(activeSession.getMatsSocketSessionId(), activeSession);
 }
 return ret;
 </pre></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../MatsSocketServer.html#getActiveMatsSocketSessions()">getActiveMatsSocketSessions</a></code>&nbsp;in interface&nbsp;<code><a href="../MatsSocketServer.html" title="interface in io.mats3.matssocket">MatsSocketServer</a></code></dd>
<dt>Returns:</dt>
<dd>a current snapshot of <a href="../MatsSocketServer.ActiveMatsSocketSession.html" title="interface in io.mats3.matssocket"><code>ActiveMatsSocketSession</code></a>s - these are the
         <b>active</b> MatsSocketSessions <b>which are active right now on <i>this node</i></b> of the set of
         nodes (i.e. cluster) that represents this <i>instance</i> of MatsSocketServer. Notice that all returned
         instances had state=<a href="../MatsSocketServer.ActiveMatsSocketSession.MatsSocketSessionState.html#SESSION_ESTABLISHED"><code>SESSION_ESTABLISHED</code></a> at the time of
         capture.</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list-long">
<li><a href="../MatsSocketServer.ActiveMatsSocketSession.html" title="interface in io.mats3.matssocket"><code>MatsSocketServer.ActiveMatsSocketSession</code></a></li>
<li><a href="../MatsSocketServer.html#getLiveMatsSocketSessions()"><code>MatsSocketServer.getLiveMatsSocketSessions()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getLiveMatsSocketSessions()">
<h3>getLiveMatsSocketSessions</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="../MatsSocketServer.LiveMatsSocketSession.html" title="interface in io.mats3.matssocket">MatsSocketServer.LiveMatsSocketSession</a>&gt;</span>&nbsp;<span class="element-name">getLiveMatsSocketSessions</span>()</div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../MatsSocketServer.html#getLiveMatsSocketSessions()">MatsSocketServer</a></code></span></div>
<div class="block">Imagine that the MatsSocketServer uses a <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ConcurrentMap.html" title="class or interface in java.util.concurrent" class="external-link"><code>ConcurrentMap</code></a> to keep its set of local, live, currently
 connected MatsSocketSessions. This method then returns an unmodifiable view of this Map. This means that you can
 get session instances, and iterate over it, but the contents will change over time as Clients come and go, i.e.
 connects and disconnects. It also means that you can get this Map instance once, and keep a local copy of it, and
 it will always be current. It again also means that if you want a "static list" of these sessions, either use
 <a href="../MatsSocketServer.html#getActiveMatsSocketSessions()"><code>MatsSocketServer.getActiveMatsSocketSessions()</code></a> which gives you a snapshot, "frozen-in-time" view of the active sessions,
 where both the sessions, and the contents of the sessions, are static. Or you may copy the values of this
 returned Map into another container - but in the latter case, the <i>contents</i> of those LiveMatsSocketSession
 instances are still live. Please observe the difference between <a href="../MatsSocketServer.ActiveMatsSocketSession.html" title="interface in io.mats3.matssocket"><code>MatsSocketServer.ActiveMatsSocketSession</code></a> and
 <a href="../MatsSocketServer.LiveMatsSocketSession.html" title="interface in io.mats3.matssocket"><code>MatsSocketServer.LiveMatsSocketSession</code></a>.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../MatsSocketServer.html#getLiveMatsSocketSessions()">getLiveMatsSocketSessions</a></code>&nbsp;in interface&nbsp;<code><a href="../MatsSocketServer.html" title="interface in io.mats3.matssocket">MatsSocketServer</a></code></dd>
<dt>Returns:</dt>
<dd>an unmodifiable concurrent live view of <a href="../MatsSocketServer.LiveMatsSocketSession.html" title="interface in io.mats3.matssocket"><code>LiveMatsSocketSession</code></a>s - these are
         the <b>live</b> MatsSocketSessions <b>which are active right now on <i>this node</i></b> of the set of
         nodes (i.e. cluster) that represents this <i>instance</i> of MatsSocketServer.</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list-long">
<li><a href="../MatsSocketServer.html#getActiveMatsSocketSessions()"><code>MatsSocketServer.getActiveMatsSocketSessions()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="closeSession(java.lang.String,java.lang.String)">
<h3>closeSession</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">closeSession</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;matsSocketSessionId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;reason)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../MatsSocketServer.html#closeSession(java.lang.String,java.lang.String)">MatsSocketServer</a></code></span></div>
<div class="block">Closes the specified MatsSocketSession - can be used to forcibly close an active MatsSocketSession (i.e. "kick it
 off"), and can also used to perform out-of-band closing of Session if the WebSocket is down (this is used in the
 MatsSocket.js Client, where an "onunload"-listener is attached, so that if the user navigates away, every effort
 is done to get the MatsSocketSession closed).
 <p/>
 Note: An invocation of any <a href="../MatsSocketServer.html#addSessionRemovedEventListener(io.mats3.matssocket.MatsSocketServer.SessionRemovedEventListener)"><code>SessionRemoved
 listeners</code></a> with type <a href="../MatsSocketServer.SessionRemovedEvent.SessionRemovedEventType.html#CLOSE"><code>CLOSE</code></a> will be issued.
 <p/>
 Note: This can be done on any node of the MatsSocketServer-instance cluster, as the instruction will be forwarded
 to the active node if the MatsSocketSession is not active on this node. If it is not active on any node, it will
 nevertheless be closed in the <a href="../ClusterStoreAndForward.html" title="interface in io.mats3.matssocket"><code>data store</code></a> (i.e. the session cannot reconnect
 again).</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../MatsSocketServer.html#closeSession(java.lang.String,java.lang.String)">closeSession</a></code>&nbsp;in interface&nbsp;<code><a href="../MatsSocketServer.html" title="interface in io.mats3.matssocket">MatsSocketServer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>matsSocketSessionId</code> - the id of the Session to close.</dd>
<dd><code>reason</code> - a short descriptive String of why it was closed.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="addSessionEstablishedEventListener(io.mats3.matssocket.MatsSocketServer.SessionEstablishedEventListener)">
<h3>addSessionEstablishedEventListener</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">addSessionEstablishedEventListener</span><wbr><span class="parameters">(<a href="../MatsSocketServer.SessionEstablishedEventListener.html" title="interface in io.mats3.matssocket">MatsSocketServer.SessionEstablishedEventListener</a>&nbsp;listener)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../MatsSocketServer.html#addSessionEstablishedEventListener(io.mats3.matssocket.MatsSocketServer.SessionEstablishedEventListener)">MatsSocketServer</a></code></span></div>
<div class="block"><a href="../MatsSocketServer.SessionEstablishedEvent.html" title="interface in io.mats3.matssocket"><code>SessionEstablishedEvent</code></a> listeners will be invoked when an
 <a href="../MatsSocketServer.LiveMatsSocketSession.html" title="interface in io.mats3.matssocket"><code>LiveMatsSocketSession</code></a> is established <b>on this node</b> of the
 <a href="../MatsSocketServer.html" title="interface in io.mats3.matssocket"><code>MatsSocketServer</code></a> instance cluster, i.e. the authentication/authorization is accepted, HELLO message from
 Client is processed and MatsSocketSessionId is established. Note that this means that in a fairly load balanced
 3-node MatsSocketServer cluster, you should get approximately 1/3 of the SessionEstablishedEvents on "this" node,
 while 2/3 of them will come on the "other" two nodes.
 <p/>
 Note: A specific MatsSocketSession with a specific MatsSocketSessionId can be established multiple times, due to
 <a href="../MatsSocketServer.SessionEstablishedEvent.SessionEstablishedEventType.html#RECONNECT"><code>RECONNECT</code></a>.
 <p/>
 <b>NOTE: You are advised against keeping hold of the <a href="../MatsSocketServer.LiveMatsSocketSession.html" title="interface in io.mats3.matssocket"><code>LiveMatsSocketSession</code></a> instance
 that is provided in the <a href="../MatsSocketServer.SessionEstablishedEvent.html" title="interface in io.mats3.matssocket"><code>SessionEstablishedEvent</code></a>.</b> You can instead get a view
 of the currently live sessions for this node by means of <a href="../MatsSocketServer.html#getLiveMatsSocketSessions()"><code>MatsSocketServer.getLiveMatsSocketSessions()</code></a>. If you still
 decide to hold on to these active sessions instances, you must be <b><i>very</i></b> certain to remove it from
 your held instances when getting <b>any</b> <a href="../MatsSocketServer.html#addSessionRemovedEventListener(io.mats3.matssocket.MatsSocketServer.SessionRemovedEventListener)"><code>SessionRemovedEvent</code></a>, meaning that you must remove it for any of the <a href="../MatsSocketServer.SessionRemovedEvent.SessionRemovedEventType.html#DEREGISTER"><code>DEREGISTER</code></a>, <a href="../MatsSocketServer.SessionRemovedEvent.SessionRemovedEventType.html#CLOSE"><code>CLOSE</code></a> and <a href="../MatsSocketServer.SessionRemovedEvent.SessionRemovedEventType.html#TIMEOUT"><code>TIMEOUT</code></a>
 event types: The live session instance is <i>dead</i> for all of these events. If you were to remove it only on
 CLOSE or TIMEOUT, believing that a DEREGISTER is a "softer" removal, you have basically misunderstood! You could
 then get a DEREGISTER (which actually is the server informing you that it has ditched this LiveMatsSocketSession
 and the session is now solely represented in the <a href="../ClusterStoreAndForward.html" title="interface in io.mats3.matssocket"><code>data store</code></a>, while you still
 stubbornly hold on to it!), and then not get a corresponding TIMEOUT for the same MatsSocketSessionId until many
 hours, or days, later. If you fail to remove it at all, you will eventually get an OutOfMemory situation. The
 reason here is that a MatsSocketSession instance is never "reanimated", even if the MatsSocketSession is just
 DEREGISTERed: A new LiveMatsSocketSession instance is <i>always</i> created upon a <a href="../MatsSocketServer.SessionEstablishedEvent.html" title="interface in io.mats3.matssocket"><code>SessionEstablishedEvent</code></a>, both for <a href="../MatsSocketServer.SessionEstablishedEvent.SessionEstablishedEventType.html#NEW"><code>NEW</code></a> <i>and</i>
 <a href="../MatsSocketServer.SessionEstablishedEvent.SessionEstablishedEventType.html#RECONNECT"><code>RECONNECT</code></a></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../MatsSocketServer.html#addSessionEstablishedEventListener(io.mats3.matssocket.MatsSocketServer.SessionEstablishedEventListener)">addSessionEstablishedEventListener</a></code>&nbsp;in interface&nbsp;<code><a href="../MatsSocketServer.html" title="interface in io.mats3.matssocket">MatsSocketServer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>listener</code> - the <a href="../MatsSocketServer.SessionEstablishedEventListener.html" title="interface in io.mats3.matssocket"><code>SessionEstablishedListener</code></a> that shall get invoked when
            MatsSocketSessions are established.</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list-long">
<li><a href="../MatsSocketServer.html#addSessionRemovedEventListener(io.mats3.matssocket.MatsSocketServer.SessionRemovedEventListener)"><code>MatsSocketServer.addSessionRemovedEventListener(SessionRemovedEventListener)</code></a></li>
<li><a href="../MatsSocketServer.html#getLiveMatsSocketSessions()"><code>MatsSocketServer.getLiveMatsSocketSessions()</code></a></li>
<li><a href="../MatsSocketServer.html#getActiveMatsSocketSessions()"><code>MatsSocketServer.getActiveMatsSocketSessions()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="addSessionRemovedEventListener(io.mats3.matssocket.MatsSocketServer.SessionRemovedEventListener)">
<h3>addSessionRemovedEventListener</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">addSessionRemovedEventListener</span><wbr><span class="parameters">(<a href="../MatsSocketServer.SessionRemovedEventListener.html" title="interface in io.mats3.matssocket">MatsSocketServer.SessionRemovedEventListener</a>&nbsp;listener)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../MatsSocketServer.html#addSessionRemovedEventListener(io.mats3.matssocket.MatsSocketServer.SessionRemovedEventListener)">MatsSocketServer</a></code></span></div>
<div class="block"><a href="../MatsSocketServer.SessionRemovedEvent.html" title="interface in io.mats3.matssocket"><code>MatsSocketServer.SessionRemovedEvent</code></a> listeners will be invoked when an <a href="../MatsSocketServer.LiveMatsSocketSession.html" title="interface in io.mats3.matssocket"><code>MatsSocketServer.LiveMatsSocketSession</code></a> is removed from this
 node of the <a href="../MatsSocketServer.html" title="interface in io.mats3.matssocket"><code>MatsSocketServer</code></a> instance cluster - this is both when a MatsSocketSession is
 <a href="../MatsSocketServer.SessionRemovedEvent.SessionRemovedEventType.html#DEREGISTER"><code>DEREGISTERed</code></a>, in which case the Client can still
 <a href="../MatsSocketServer.SessionEstablishedEvent.SessionEstablishedEventType.html#RECONNECT"><code>RECONNECT</code></a> to the same MatsSocketSessionId, and when a
 MatsSocketSession is <a href="../MatsSocketServer.SessionRemovedEvent.SessionRemovedEventType.html#CLOSE"><code>CLOSEd</code></a> or <a href="../MatsSocketServer.SessionRemovedEvent.SessionRemovedEventType.html#TIMEOUT"><code>TIMEOUTed</code></a>. In the latter cases, any information of the MatsSocketSession and its MatsSocketSessionId are deleted
 from the MatsSocketServer, and the session cannot be reconnected again.
 <p/>
 Note: A specific MatsSocketSession can <a href="../MatsSocketServer.SessionRemovedEvent.SessionRemovedEventType.html#DEREGISTER"><code>DEREGISTER</code></a> multiple times, due
 to it can <a href="../MatsSocketServer.SessionEstablishedEvent.SessionEstablishedEventType.html#RECONNECT"><code>RECONNECT</code></a> again after each DEREGISTER. However, once it
 has <a href="../MatsSocketServer.SessionRemovedEvent.SessionRemovedEventType.html#CLOSE"><code>CLOSE</code></a> or <a href="../MatsSocketServer.SessionRemovedEvent.SessionRemovedEventType.html#TIMEOUT"><code>TIMEOUT</code></a>, the session
 cannot RECONNECT ever again, and hence those events are terminal wrt. to that specific MatsSocketSessionId.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../MatsSocketServer.html#addSessionRemovedEventListener(io.mats3.matssocket.MatsSocketServer.SessionRemovedEventListener)">addSessionRemovedEventListener</a></code>&nbsp;in interface&nbsp;<code><a href="../MatsSocketServer.html" title="interface in io.mats3.matssocket">MatsSocketServer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>listener</code> - the <a href="../MatsSocketServer.SessionEstablishedEventListener.html" title="interface in io.mats3.matssocket"><code>SessionEstablishedListener</code></a> that shall get invoked when
            MatsSocketSessions are removed (either deregistered, closed or timed out).</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list-long">
<li><a href="../MatsSocketServer.html#addSessionEstablishedEventListener(io.mats3.matssocket.MatsSocketServer.SessionEstablishedEventListener)"><code>MatsSocketServer.addSessionEstablishedEventListener(SessionEstablishedEventListener)</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="addMessageEventListener(io.mats3.matssocket.MatsSocketServer.MessageEventListener)">
<h3>addMessageEventListener</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">addMessageEventListener</span><wbr><span class="parameters">(<a href="../MatsSocketServer.MessageEventListener.html" title="interface in io.mats3.matssocket">MatsSocketServer.MessageEventListener</a>&nbsp;listener)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../MatsSocketServer.html#addMessageEventListener(io.mats3.matssocket.MatsSocketServer.MessageEventListener)">MatsSocketServer</a></code></span></div>
<div class="block"><a href="../MatsSocketServer.MessageEventListener.html" title="interface in io.mats3.matssocket"><code>MessageEventListener</code></a>s will be invoked for every processed incoming and outgoing
 message for any session. It will be invoked <i>after</i> the message is processed OK on incoming, and
 <i>after</i> the message is sent for outgoing. Note that the <a href="../MatsSocketServer.MatsSocketEnvelopeWithMetaDto.html" title="class in io.mats3.matssocket"><code>MatsSocketServer.MatsSocketEnvelopeWithMetaDto</code></a> contains more
 information than is sent over the wire, this is the "WithMeta" aspect which holds processing metadata - the
 wire-part is what is contained in <a href="../MatsSocketServer.MatsSocketEnvelopeDto.html" title="class in io.mats3.matssocket"><code>MatsSocketServer.MatsSocketEnvelopeDto</code></a>.
 <p/>
 <b>Note wrt. modifications on the <code>MatsSocketEnvelopeWithMetaDto</code>! All fields are public and
 non-final, so you can modify it before e.g. sending it over Mats (e.g. nulling out the 'msg' field). However,
 read the JavaDoc comment on the class: There is only one single instance for all listeners and
 <a href="../MatsSocketServer.ActiveMatsSocketSession.html#getLastEnvelopes()"><code>MatsSocketServer.ActiveMatsSocketSession.getLastEnvelopes()</code></a> "last envelopes"}, so clone it before modifying!</b>
 <p/>
 Note: The last messages per <a href="../MatsSocketServer.ActiveMatsSocketSession.html" title="interface in io.mats3.matssocket"><code>MatsSocketServer.ActiveMatsSocketSession</code></a> is available via
 <a href="../MatsSocketServer.ActiveMatsSocketSession.html#getLastEnvelopes()"><code>MatsSocketServer.ActiveMatsSocketSession.getLastEnvelopes()</code></a>.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../MatsSocketServer.html#addMessageEventListener(io.mats3.matssocket.MatsSocketServer.MessageEventListener)">addMessageEventListener</a></code>&nbsp;in interface&nbsp;<code><a href="../MatsSocketServer.html" title="interface in io.mats3.matssocket">MatsSocketServer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>listener</code> - the <a href="../MatsSocketServer.MessageEventListener.html" title="interface in io.mats3.matssocket"><code>MatsSocketServer.MessageEventListener</code></a> that will be invoked for every processed incoming and outgoing
            envelope for any session.</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list-long">
<li><a href="../MatsSocketServer.ActiveMatsSocketSession.html#getLastEnvelopes()"><code>MatsSocketServer.ActiveMatsSocketSession.getLastEnvelopes()</code></a></li>
<li><a href="../MatsSocketServer.MatsSocketEnvelopeWithMetaDto.html" title="class in io.mats3.matssocket"><code>MatsSocketServer.MatsSocketEnvelopeWithMetaDto</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="stop(int)">
<h3>stop</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">stop</span><wbr><span class="parameters">(int&nbsp;gracefulShutdownMillis)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../MatsSocketServer.html#stop(int)">MatsSocketServer</a></code></span></div>
<div class="block">Closes all <a href="../MatsSocketServer.ActiveMatsSocketSession.html" title="interface in io.mats3.matssocket"><code>MatsSocketServer.ActiveMatsSocketSession</code></a> on this node, closing the WebSocket with
 <code>CloseReason.CloseCodes.SERVICE_RESTART</code> (assuming that a MatsSocket service will never truly go down, thus effectively
 asking the client to reconnect, hopefully to another instance). Should be invoked at application shutdown.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../MatsSocketServer.html#stop(int)">stop</a></code>&nbsp;in interface&nbsp;<code><a href="../MatsSocketServer.html" title="interface in io.mats3.matssocket">MatsSocketServer</a></code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
